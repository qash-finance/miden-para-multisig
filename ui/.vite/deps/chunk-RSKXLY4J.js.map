{
  "version": 3,
  "sources": ["../../node_modules/.pnpm/zustand-sync-tabs@0.2.3_zustand@4.5.7_@types+react@19.2.7_react@19.2.1_/node_modules/zustand-sync-tabs/index.js"],
  "sourcesContent": ["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.syncTabs = void 0;\nvar LOAD = \"__load__\";\nvar syncTabs = function (f, options) { return function (set, get, store) {\n    /** avoid errors on server side or when BroadcastChannel is not supported */\n    if (!globalThis.BroadcastChannel) {\n        console.log(\"BroadcastChannel is not supported in this context!\");\n        return f(set, get, store);\n    }\n    /** temporarily support `regExpToIgnore` */\n    if (!options.exclude)\n        options.exclude = [];\n    if (options.regExpToIgnore)\n        options.exclude.push(options.regExpToIgnore);\n    /** end of temporarily support `regExpToIgnore` */\n    var channel = new BroadcastChannel(options.name);\n    if (channel)\n        channel.postMessage(LOAD);\n    var set_ = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var prevState = get();\n        set.apply(void 0, args);\n        var currentState = get();\n        var stateUpdates = {};\n        /** sync only updated state to avoid un-necessary re-renders */\n        var keysToSync = getKeysToSyncMemoised(Object.keys(currentState), options);\n        if (keysToSync.length === 0)\n            return;\n        keysToSync.forEach(function (k) {\n            if (currentState[k] !== prevState[k])\n                stateUpdates[k] = currentState[k];\n        });\n        if (Object.keys(stateUpdates).length) {\n            channel === null || channel === void 0 ? void 0 : channel.postMessage(stateUpdates);\n        }\n    };\n    if (channel)\n        channel.onmessage = function (e) {\n            if (e.data === LOAD) {\n                var currentState_1 = get();\n                var stateUpdates_1 = {};\n                /** sync only updated state to avoid un-necessary re-renders */\n                var keysToSync = getKeysToSyncMemoised(Object.keys(currentState_1), options);\n                if (keysToSync.length === 0)\n                    return;\n                keysToSync.forEach(function (k) {\n                    if (typeof currentState_1[k] !== \"function\") {\n                        stateUpdates_1[k] = currentState_1[k];\n                    }\n                });\n                if (Object.keys(stateUpdates_1).length) {\n                    channel === null || channel === void 0 ? void 0 : channel.postMessage(stateUpdates_1);\n                }\n            }\n            else\n                set(e.data);\n        };\n    return f(set_, get, store);\n}; };\nexports.syncTabs = syncTabs;\nfunction matchPatternOrKey(key, patterns) {\n    for (var _i = 0, patterns_1 = patterns; _i < patterns_1.length; _i++) {\n        var patternOrKey = patterns_1[_i];\n        if (typeof patternOrKey === \"string\" && key === patternOrKey)\n            return true;\n        else if (patternOrKey instanceof RegExp && patternOrKey.test(key))\n            return true;\n    }\n    return false;\n}\n/** Encapsulate cache in closure */\nvar getKeysToSyncMemoised = (function () {\n    var persistAndSyncKeysCache = {};\n    var getKeysSync = function (keys, options) {\n        var exclude = options.exclude, include = options.include;\n        var keysToInlcude = (include === null || include === void 0 ? void 0 : include.length)\n            ? keys.filter(function (key) { return matchPatternOrKey(key, include); })\n            : keys;\n        var keysToPersistAndSync = keysToInlcude.filter(function (key) { return !matchPatternOrKey(key, exclude || []); });\n        return keysToPersistAndSync;\n    };\n    return function (keys, options) {\n        var cacheKey = JSON.stringify({ options: options, keys: keys });\n        if (!persistAndSyncKeysCache[cacheKey])\n            persistAndSyncKeysCache[cacheKey] = getKeysSync(keys, options);\n        return persistAndSyncKeysCache[cacheKey];\n    };\n})();\n"],
  "mappings": "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",
  "names": []
}
